# Sentinel (哨兵) 系统产品需求文档 (PRD)

> 最新版本: v1.2
> 更新日期: 2026-01-21

---

## v1.5 (Planned)

### 1. 智能化升级 (AI Integration) - **High Priority**

* **智能摘要:** 引入 LLM (OpenAI/Claude/DeepSeek API) 生成简短摘要，用于飞书卡片展示。
* **情感/风险评分:** 让 LLM 判断新闻的紧急程度（1-5分），仅对高分新闻进行实时强提醒（如 @所有人）。

### 2. 数据源扩展 (More Sources)

* **Twitter (X) 监控:** 关注安全事件账号（如 PeckShieldAlert）。
* **官方监管源:** 增加 SEC、香港证监会官网的公告监控。

### 3. 系统优化 (System Optimization)

* **登录鉴权:** 增加简单的 HTTP Basic Auth 或基于 Session 的登录功能，保护内部数据。
* **Docker 化:** 编写 Dockerfile 和 docker-compose.yml，实现一键部署。

### 4. 前端体验 (Frontend Experience)

* **图表可视化:** 在仪表盘引入 Chart.js 或 ECharts，展示“近7日高危快讯趋势图”或“来源占比饼图”。

---

## v1.2 (Released)

> 状态: 已在 2026-01-21 实现并部署当前版本（含仪表盘累计统计与导航菜单分组优化）。

### 1. 数据统计增强 (Enhanced Statistics)

#### 1.1 仪表盘总量指标

在现有"今日抓取"和"今日匹配"基础上，新增累计统计：

* **总抓取数 (Total Scanned):** 系统启动至今累计抓取的所有快讯数量（含已过滤的噪音数据）
* **总匹配数 (Total Matched):** 系统启动至今累计匹配的高价值情报数量

**数据来源:**

* 总抓取：`scan_record` 表的总记录数
* 总匹配：`newsflash` 表的总记录数

**展示方式:**

* 在仪表盘新增两个统计卡片
* 使用不同图标/颜色区分"今日"与"累计"指标
* 保持 UI 风格一致性

### 2. 导航菜单优化 (Navigation Optimization)

#### 2.1 菜单结构调整

优化左侧导航菜单层级，提升信息架构清晰度：

**现有结构:**

* 仪表盘
* 快讯列表
* 报表归档

**新结构:**

* 仪表盘（一级菜单）
* 舆情监控（新增一级菜单）
  * 快讯列表（二级子菜单）
  * 报表归档（二级子菜单）

**交互设计:**

* "舆情监控"菜单支持展开/折叠
* 默认展开状态
* 点击一级菜单时展开/折叠子菜单
* 路由路径保持不变（向后兼容）

## v1.1 (Released)

### 1. 产品概述 (Overview)

#### 1.1 产品定位

Sentinel 是一个垂直于**区块链加密货币合规与安全领域**的自动化情报监测系统。旨在帮助用户从海量公开快讯中自动筛选高价值信息，第一时间发现洗钱、被盗、监管政策变动等潜在风险信号，并提供实时预警、周期性报告及可视化管理。

#### 1.2 核心价值

* **全天候监测:** 7x24小时不间断监控信息源，解决人工盯盘的疲劳和遗漏问题。
* **合规聚焦:** 专注于 KYT (Know Your Transaction)、反洗钱、监管合规等特定垂直领域，过滤市场噪音。
* **闭环管理:** 实现从“发现”->“预警”->“归档”->“报告”的全流程自动化。
* **可视化回溯:** 提供 Web 管理界面，方便历史情报查询与报表查看。

### 2. 核心功能 (Core Features)

#### 2.1 多源数据采集 (Multi-source Data Acquisition)

系统需支持对多个权威快讯源的并发采集，并统一清洗为标准格式。

* **监控源:**
  1. **AICoin 快讯:** `https://www.aicoin.com/zh-Hans/news-flash`
  2. **BlockBeats (律动) 快讯:** `https://www.theblockbeats.info/newsflash`
* **采集方式:** 支持 Playwright 无头浏览器渲染或 RSS/API 获取。
* **配置化频率:** 抓取频率（如每 5 分钟）需在配置文件中统一管理，便于灵活调整。
* **数据标准化:** 不同来源的数据需统一清洗为标准结构（标题、正文、发布时间、来源名称、原始链接），以便统一处理。
* **去重机制:** 必须具备唯一性校验（基于 Source ID 或 Title+Time 哈希），确保同一条新闻不会重复抓取或报警。

#### 2.2 智能筛选 (Smart Filtering)

系统采用 **“白名单 + 黑名单”** 双重过滤逻辑：

1. **命中白名单:** 只有包含特定关键词（如“被盗”、“监管”）的新闻才会被保留。
2. **排除黑名单:** 即使命中白名单，如果包含噪音词（如“赞助”、“空投”），也必须被丢弃。

#### 2.3 智能预警与推送策略 (Smart Alerting & Notification Strategy)

为避免信息过载（Alert Fatigue），系统支持两种可配置的推送模式：

1. **实时模式 (Real-time Mode):**

   * 只要发现符合条件的匹配情报，**立即**通过飞书机器人推送。
   * 适用场景：极度敏感的安全事件（如黑客攻击、私钥泄露）。
2. **定时汇总模式 (Interval Mode):**

   * 将抓取到的情报暂存在本地，每隔固定时间（例如每 **60分钟**）汇总成一条长消息推送。
   * 若该时间段内无新情报，则不发送消息。
   * 适用场景：日常监管动态、宏观经济指标。

* **渠道:** 飞书 (Lark) Webhook 机器人。
* **形式:** 富文本卡片消息 (Interactive Cards)。

#### 2.4 数据存储 (Data Storage)

* **本地化:** 所有经过筛选的匹配情报需保存在本地数据库 (SQLite) 中。
* **统计数据:** 系统需记录每日抓取的**原始数据总量**（入库前经过去重但未经过滤的数据），用于展示系统的扫描工作量。
* **可追溯:** 数据需包含原始 ID、发布时间、抓取时间、原文链接及触发的关键词。
* **报表归档:** 系统生成的日报和周报需持久化存储，以便在管理后台查看。

#### 2.5 周期报告 (Periodic Reporting)

* **日报:** 每日早上 09:00 推送过去 24 小时的匹配情报汇总。
* **周报:** 每周一早上 09:30 推送过去一周的情报汇总。
* **展示方式:** 按“监管”、“安全”、“宏观”等维度分类展示。

#### 2.6 可视化管理后台 (Web Dashboard) [v1.1 新增]

提供轻量级 Web 界面，用于数据查询与管理。

* **权限:** v1.1 版本暂不设登录鉴权，仅限内网访问 (Open Access)。
* **仪表盘 (Dashboard):**
  * **今日抓取 (Scanned):** 展示今日经过去重处理的**所有**快讯数量（包含被过滤掉的噪音），体现系统的工作覆盖面。
  * **今日匹配 (Matched):** 展示今日经过筛选后保留的高价值情报数量，体现系统的核心产出。
* **情报查询 (News Explorer):**
  * **列表页:** 分页展示所有历史抓取到的快讯。
  * **筛选器:** 支持按“时间范围”、“来源 (AICoin/BlockBeats)”、“标签”进行筛选。
  * **详情页:** 查看快讯完整内容、原始链接及高亮关键词。
* **报表归档 (Report Archive):**
  * 提供日历或列表视图，查看历史生成的日报和周报（HTML 渲染）。
  * 解决 IM 工具消息翻阅困难的问题。

### 3. 监控指标与关键词 (Monitoring Dimensions)

为确保抓取精准度，关键词分为以下三类：

#### 3.1 ⚠️ 安全与风控 (Security & Risk)

> 关注资产安全、黑客攻击及技术漏洞。

* **关键词:** KYT, 风控, 安全, 盗币, 被盗, 黑客, 攻击, 漏洞, 私钥, 泄露, 钓鱼, Rug Pull, 跑路, 赔偿.

#### 3.2 ⚖️ 合规与监管 (Compliance & Regulation)

> 关注政策变动、法律制裁及合规要求。

* **关键词:** 监管, 合规, 洗钱, 反洗钱, 涉嫌, 非法, 制裁, SEC, FCA, SFC, 证监会, 司法部, 起诉, 罚款, 牌照, 实名, 冻结.

#### 3.3 🏦 宏观经济 (Macroeconomics)

> 关注可能引发系统性风险的宏观指标。

* **关键词:** 美联储, 利率, 加息, 降息, CPI, 通胀, 鲍威尔.

#### 3.4 🚫 噪音排除 (Noise / Blacklist)

> 需明确排除的营销与无关信息。

* **关键词:** 赞助, 广告, 推广, 空投, 抽奖, 赠送, 邀请返佣, 峰会预告, 马拉松 (黑客松除外), 早报/晚报 (避免重复).

### 4. 后续规划 (Future Roadmap)

* **v1.5:** 引入 LLM (大语言模型) 对日报/周报进行智能摘要生成，而非简单的列表罗列。
* **v2.0:** 增加更多数据源 (如 Twitter/X, CoinDesk, 监管机构官网)。
* **v2.0:** 支持多用户订阅管理及后台登录鉴权。

---

---

## v1.0 (Archived)

**版本:** v1.0
**日期:** 2024-12-29
**状态:** 规划中

### 1. 产品概述 (Overview)

#### 1.1 产品定位

Sentinel 是一个垂直于**区块链加密货币合规与安全领域**的自动化情报监测系统。旨在帮助用户从海量公开快讯中自动筛选高价值信息，第一时间发现洗钱、被盗、监管政策变动等潜在风险信号，并提供实时预警和周期性报告。

#### 1.2 核心价值

* **全天候监测:** 7x24小时不间断监控信息源，解决人工盯盘的疲劳和遗漏问题。
* **合规聚焦:** 专注于 KYT (Know Your Transaction)、反洗钱、监管合规等特定垂直领域，过滤市场噪音。
* **闭环管理:** 实现从“发现”->“预警”->“归档”->“报告”的全流程自动化。

### 2. 核心功能 (Core Features)

#### 2.1 数据采集 (Data Acquisition)

* **监控源:** AICoin 快讯栏目 (`https://www.aicoin.com/zh-Hans/news-flash`)。
* **时效性:** 系统需在新闻发布后的 **5分钟内** 完成抓取与处理。
* **去重机制:** 必须具备唯一性校验，确保同一条新闻（即使标题有细微修正）不会重复抓取或重复报警。

#### 2.2 智能筛选 (Smart Filtering)

系统采用 **“白名单 + 黑名单”** 双重过滤逻辑：

1. **命中白名单:** 只有包含特定关键词（如“被盗”、“监管”）的新闻才会被保留。
2. **排除黑名单:** 即使命中白名单，如果包含噪音词（如“赞助”、“空投”），也必须被丢弃。

#### 2.3 智能预警与推送策略 (Smart Alerting & Notification Strategy)

为避免信息过载（Alert Fatigue），系统支持两种可配置的推送模式：

1. **实时模式 (Real-time Mode):**

   - 只要发现符合条件的高危情报，**立即**通过飞书机器人推送。
   - 适用场景：极度敏感的安全事件（如黑客攻击、私钥泄露）。
2. **定时汇总模式 (Interval Mode):**

   - 将抓取到的情报暂存在本地，每隔固定时间（例如每 **60分钟**）汇总成一条长消息推送。
   - 若该时间段内无新情报，则不发送消息。
   - 适用场景：日常监管动态、宏观经济指标。

* **渠道:** 飞书 (Lark) Webhook 机器人。
* **形式:** 富文本卡片消息 (Interactive Cards)。
* **内容:**
  * **标题:** 包含警示图标和新闻标题。
  * **摘要:** 新闻核心内容（限制字数）。
  * **标签:** 自动打上的分类标签（如 #安全 #监管）。
  * **链接:** 跳转至源网站的按钮。

#### 2.4 数据存储 (Data Storage)

* **本地化:** 所有经过筛选的高价值情报需保存在本地数据库中。
* **可追溯:** 数据需包含原始 ID、发布时间、抓取时间、原文链接及触发的关键词。

#### 2.5 周期报告 (Periodic Reporting)

* **日报:** 每日早上 09:00 推送过去 24 小时的高危情报汇总。
* **周报:** 每周一早上 09:30 推送过去一周的情报汇总。
* **展示方式:** 按“监管”、“安全”、“宏观”等维度分类展示。

### 3. 监控指标与关键词 (Monitoring Dimensions)

为确保抓取精准度，关键词分为以下三类：

#### 3.1 ⚠️ 安全与风控 (Security & Risk)

> 关注资产安全、黑客攻击及技术漏洞。

* **关键词:** KYT, 风控, 安全, 盗币, 被盗, 黑客, 攻击, 漏洞, 私钥, 泄露, 钓鱼, Rug Pull, 跑路, 赔偿.

#### 3.2 ⚖️ 合规与监管 (Compliance & Regulation)

> 关注政策变动、法律制裁及合规要求。

* **关键词:** 监管, 合规, 洗钱, 反洗钱, 涉嫌, 非法, 制裁, SEC, FCA, SFC, 证监会, 司法部, 起诉, 罚款, 牌照, 实名, 冻结.

#### 3.3 🏦 宏观经济 (Macroeconomics)

> 关注可能引发系统性风险的宏观指标。

* **关键词:** 美联储, 利率, 加息, 降息, CPI, 通胀, 鲍威尔.

#### 3.4 🚫 噪音排除 (Noise / Blacklist)

> 需明确排除的营销与无关信息。

* **关键词:** 赞助, 广告, 推广, 空投, 抽奖, 赠送, 邀请返佣, 峰会预告, 马拉松 (黑客松除外), 早报/晚报 (避免重复).

### 4. 后续规划 (Future Roadmap)

* **v1.5:** 引入 LLM (大语言模型) 对日报/周报进行智能摘要生成，而非简单的列表罗列。
* **v2.0:** 增加更多数据源 (如 Twitter/X, CoinDesk, 监管机构官网)。
* **v2.0:** 支持多用户订阅管理。
